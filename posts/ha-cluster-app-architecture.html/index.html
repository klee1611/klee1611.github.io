<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>HA Cluster Notes and Application Design - Kourtney's Blog</title><meta name=Description content="A blog about programming, technology, and life."><meta property="og:url" content="https://klee1611.github.io/posts/ha-cluster-app-architecture.html/"><meta property="og:site_name" content="Kourtney's Blog"><meta property="og:title" content="HA Cluster Notes and Application Design"><meta property="og:description" content="When designing systems with higher traffic, you will eventually encounter cluster-related issues.
Cluster A collection of one or more machines (nodes) with three different purposes:
Load Balancing Allows multiple machines to share tasks as evenly as possible, accelerating application execution.
High Availability (HA) For high availability and redundancy, if one machine suddenly fails, others can take over.
High Performance Computing High-performance/parallel computing systems, abbreviated as HPC clusters, combine the hardware of multiple machines to increase computing power, used to solve tasks that a single machine cannot handle."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-09T19:40:00+08:00"><meta property="article:modified_time" content="2025-10-31T16:17:18+08:00"><meta property="article:tag" content="Cluster"><meta property="article:tag" content="High Availability"><meta property="article:tag" content="Architecture"><meta name=twitter:card content="summary"><meta name=twitter:title content="HA Cluster Notes and Application Design"><meta name=twitter:description content="When designing systems with higher traffic, you will eventually encounter cluster-related issues.
Cluster A collection of one or more machines (nodes) with three different purposes:
Load Balancing Allows multiple machines to share tasks as evenly as possible, accelerating application execution.
High Availability (HA) For high availability and redundancy, if one machine suddenly fails, others can take over.
High Performance Computing High-performance/parallel computing systems, abbreviated as HPC clusters, combine the hardware of multiple machines to increase computing power, used to solve tasks that a single machine cannot handle."><meta name=application-name content="Kourtney's Blog"><meta name=apple-mobile-web-app-title content="Kourtney's Blog"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/><link rel=prev href=https://klee1611.github.io/posts/common-dns-resource-record.html/><link rel=next href=https://klee1611.github.io/posts/docker-operating-2.html/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="WLcU5DjZJSqz0doT_JYXHt6H-4I0EE_iWnsqFqyO1E0"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"HA Cluster Notes and Application Design","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/klee1611.github.io\/posts\/ha-cluster-app-architecture.html\/"},"genre":"posts","keywords":"Cluster, High availability, Architecture","wordcount":421,"url":"https:\/\/klee1611.github.io\/posts\/ha-cluster-app-architecture.html\/","datePublished":"2020-01-09T19:40:00+08:00","dateModified":"2025-10-31T16:17:18+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Kourtney Lee"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>const query=window.matchMedia("(prefers-color-scheme: dark)");function applyTheme(){let e=window.localStorage?.getItem("theme")||"dark",t=e==="dark"||e==="auto"&&query.matches;document.body.setAttribute("theme",t?"dark":"light"),document.body.setAttribute("cfg-theme",e)}applyTheme(),query.addEventListener("change",applyTheme)</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Kourtney's Blog">Kourtney's Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=https://github.com/klee1611 rel="noopener noreffer" target=_blank><i class='fab fa-fw fa-github'></i> GitHub </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><span class="menu-item language" title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/posts/ha-cluster-app-architecture.html/ selected>English</option><option value=/zh-tw/posts/ha-cluster-app-architecture.html/>繁體中文</option></select></span></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Kourtney's Blog">Kourtney's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=https://github.com/klee1611 title rel="noopener noreffer" target=_blank><i class='fab fa-fw fa-github'></i>GitHub</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><span class=menu-item title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/posts/ha-cluster-app-architecture.html/ selected>English</option><option value=/zh-tw/posts/ha-cluster-app-architecture.html/>繁體中文</option></select></span></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">HA Cluster Notes and Application Design</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Kourtney Lee</a></span>&nbsp;<span class=post-category>included in <a href=/categories/web-hosting/><i class="far fa-folder fa-fw" aria-hidden=true></i>Web Hosting</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-01-09>2020-01-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;421 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;2 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#cluster>Cluster</a><ul><li><a href=#load-balancing>Load Balancing</a></li><li><a href=#high-availability-ha>High Availability (HA)</a></li><li><a href=#high-performance-computing>High Performance Computing</a></li></ul></li><li><a href=#ha-operating-modes>HA Operating Modes</a><ul><li><a href=#active-passive-ap>Active-Passive (AP)</a></li><li><a href=#active-active-aa>Active-Active (AA)</a></li></ul></li><li><a href=#application-design>Application Design</a><ul><li><a href=#remark>Remark</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><p>When designing systems with higher traffic, you will eventually encounter cluster-related issues.</p><h2 id=cluster>Cluster</h2><p>A collection of one or more machines (nodes) with three different purposes:</p><h3 id=load-balancing>Load Balancing</h3><p>Allows multiple machines to share tasks as evenly as possible,
accelerating application execution.</p><h3 id=high-availability-ha>High Availability (HA)</h3><p>For high availability and redundancy,
if one machine suddenly fails, others can take over.</p><h3 id=high-performance-computing>High Performance Computing</h3><p>High-performance/parallel computing systems,
abbreviated as HPC clusters,
combine the hardware of multiple machines to increase computing power,
used to solve tasks that a single machine cannot handle.</p><h2 id=ha-operating-modes>HA Operating Modes</h2><p>There are many types, such as N+1, N+M, &mldr;
But the most common is a two-node cluster.
A two-node cluster has two operating modes:</p><ul><li>Active-Passive</li><li>Active-Active</li></ul><h3 id=active-passive-ap>Active-Passive (AP)</h3><p>A master-slave design.
Under normal circumstances, only the master (Active) provides the service.
When the master (Active) encounters a problem, the slave (Passive) takes over.
Once the master (Active) recovers, it switches back, and the master (Active) continues to handle the service.</p><p>Advantages:</p><ul><li>Fast fail-over speed.</li><li>Relatively simple design and configuration.</li></ul><p>Disadvantages:</p><ul><li>Cannot perform load balancing simultaneously, wasting some hardware resources.</li></ul><h3 id=active-active-aa>Active-Active (AA)</h3><p>Both machines simultaneously run their own independent services (both are Active),
and also provide mutual redundancy (acting as the other&rsquo;s Passive).
When one machine encounters a problem, the other takes over its service.</p><p>Advantages:</p><ul><li>Neither machine is idle during normal operation,
resulting in high operational efficiency.</li></ul><p>Disadvantages:</p><ul><li>The machine&rsquo;s load increases after fail-over,
leading to slower performance.</li><li>Relatively complex design and configuration.</li></ul><h2 id=application-design>Application Design</h2><ul><li>There needs to be a relatively simple way to start, stop, force-stop services, and check the current status of services.<br>=> When designing the application, there should be a command-line interface or script to achieve this.<br>=> Services on both machines should be able to know each other&rsquo;s status and be able to start or stop in case of an accident.</li><li>Shared storage is required,
and the application should record its state as meticulously as possible to shared storage.<br>=> This ensures nothing is lost when switching between the two machines.</li><li>It should be possible to restart another node and restore it to the state before the failure occurred.<br>=> Restoring to the pre-failure state can be done using the state saved to shared storage.</li><li>When the application crashes, the data stored on shared storage must not be corrupted.<br>=> The other side needs to use it.</li></ul><h3 id=remark>Remark</h3><ul><li>Consider scenarios that occur during application upgrades.</li><li>Some SQL or NoSQL databases inherently support these types of configurations, which can be adopted to reduce a lot of trouble.</li></ul></div><div id=buy-me-a-coffee align=center style=margin-top:5vh><script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=klee1611 data-color=#FFDD00 data-emoji data-font=Bree data-text="Buy me a coffee" data-outline-color=#000000 data-font-color=#000000 data-coffee-color=#ffffff></script></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2025-10-31</span></div><div id=page-views class=post-info-mod></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on X" data-sharer=x data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design" data-via=KourtneyLee1611 data-hashtags="Cluster,High availability,Architecture"><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Threads" data-sharer=threads data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design"><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-hashtag=Cluster><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/><i class="fab fa-linkedin-in fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/><i class="fab fa-reddit fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@15.14.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Diaspora" data-sharer=diaspora data-url=https://klee1611.github.io/posts/ha-cluster-app-architecture.html/ data-title="HA Cluster Notes and Application Design" data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2fklee1611.github.io%2fposts%2fha-cluster-app-architecture.html%2f&amp;text=HA%20Cluster%20Notes%20and%20Application%20Design" target=_blank title="Share on Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/cluster/>Cluster</a>,&nbsp;<a href=/tags/high-availability/>High Availability</a>,&nbsp;<a href=/tags/architecture/>Architecture</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/common-dns-resource-record.html/ class=prev rel=prev title="Common DNS Resource Records"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Common DNS Resource Records</a>
<a href=/posts/docker-operating-2.html/ class=next rel=next title="Docker Operations Log (Part 2)">Docker Operations Log (Part 2)<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=gitalk class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://github.com/gitalk/gitalk>Gitalk</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.151.2">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2021 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Kourtney Lee</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js></script><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script>window.config={comment:{gitalk:{admin:["klee1611"],clientID:"9039cf9e5ad3113a26a0",clientSecret:"f7944019c2817fafd830792a4b68d2c38ff69521",id:"2020-01-09T19:40:00+08:00",owner:"klee1611",repo:"klee1611.github.io",title:"HA Cluster Notes and Application Design"}},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script src=/js/theme.min.js></script></body></html>